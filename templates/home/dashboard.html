{% load static %}
{% load crispy_forms_tags %}
<!doctype html>

<html lang="en">
  <head>
    <title>Dashboard</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/dash.css' %}">
  </head>
  <body style="height: 100%;">
    <div class="area">

          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="cube"></div>
          <div class="res-nav d-flex d-md-none d-lg-none justify-content-around align-items-center mb-3" style="z-index: 10;">
            <div class="p-1 flex-grow-1 icons justify-content-center">
        <img class="img-fluid rounded-circle img-thumbnail" style="width: 40px; height: 40px;" src="{{request.user.profile_picture.url}}" alt="" srcset="">
            </div>
            <div class="flex-grow-1 icons justify-content-center p-1">
                <a href="{%url 'index' %}"><img class="img-fluid" style="width: 40px; height: 40px;" src="{%static 'images/house.png' %}" alt=""></a>
              </div>
            <div class="flex-grow-1 icons justify-content-center p-1">
              <a href="javascript:void(0)" onclick="window.location.reload();"><img class="img-fluid" style="width: 40px; height: 40px;" src="{%static 'images/dashboard.png' %}" alt=""></a>
            </div>
            <div class="flex-grow-1 icons justify-content-center p-1">
              <a href="javascript:void(0)" onclick="settings({{request.user.id}})"><img class="img-fluid"style="width: 40px; height: 40px;" src="{%static 'images/settings.png' %}" alt=""></a>
            </div>
            <div class="flex-grow-1 icons justify-content-center p-1">
              <a href=""><img class="img-fluid"style="width: 40px; height: 40px;" src="{%static 'images/conversation.png' %}" alt=""></a>
            </div>
            <div class="flex-grow-1 icons justify-content-center p-1">
              <a href=""><img class="img-fluid"style="width: 40px; height: 40px;" src="{%static 'images/information.png' %}" alt=""></a>
            </div>

        </div>
      <div class="container-fluid">
        <div class="container">
          <div class="row">
            <div class="col-md-3">
              <div class="sidenav col-md-12 d-flex flex-column align-items-center p-lg-5" style="height: 100vh; background:#E7E8EB20;">

                <div class="prof-img ">
                  <!-- <img class="pl-5"  src=" {% static 'images/home.png'%}" alt="" srcset=""> -->
                  <div class="d-flex justify-content-center">
                    <a class="text-white" href="{% url 'index' %}"><i style="font-size: 2em" class="fa fa-home" aria-hidden="true"></i></a>
                
                  </div>
                
                  <img class="img-fluid img-thumbnail" src="{{request.user.profile_picture.url}}" alt="" srcset="">
                  <p class="text-center text-white">Username: {{request.user.username}}</p>
                  <p style="font-size: 0.75rem" class="text-center text-white">Referal Code: <b>{{request.user.referal_code}}</b> </p>
                  <p class="text-center text-white">Referal Points: {{request.user.referal_point}} </p>
                  <hr class="">
                </div>
                
                <div class="panels" style="width:100%; height: 30%; border-bottom: 1px solid rgba(17, 17, 19, 0.125)">
                  <div class="text-center das pt-2 pb-3" style=" border-bottom: 1px solid white;">
                    <li><a href="javascript:void(0)" onclick="window.location.reload();">Dashboard</a></li>
                
                  </div>
                  <div class="text-center das pt-2 pb-3" style=" border-bottom: 1px solid white;">
                      <li><a href="javascript:void(0)" onclick="settings({{request.user.id}})">Management</a></li>
                
                  </div>
                  <div class="text-center das pt-2 pb-3" style=" border-bottom: 1px solid white;">
                      <li><a href="#dashboard">FAQ</a></li>
                
                  </div>
                </div>
                
                </div>
            </div>
            <div class="col-md-9" id="main-areas">
              <div class="row">
                <div class="col-md-6 me mt-4">
                <!-- <div class="d-flex justify-content-start align-start-end pt-2">
                    <button class="shadow add-buttons"><i class="fa fa-bars"></i></button>
                </div> -->
              <div class=" d-flex flex-column contains align-items-start pt-lg-x">
              
                <div class="segment">
              
                  <div class="name pt-5 pt-lg-0">
                    <h3 >Hi {{request.user.username}} </h3>
                  </div>
              
                  <div class="p">
                      <p > welcome back to your workspace we really miss you.</p>
                  </div>
              
                  <div class="">
                      <div class="input-group position-relative p-lg-2 search">
                            <input class="p-2 phones" type="text" placeholder="Search for Tasks project..." name="project" id="project">
                          <i class="fa fa-search pt-2 pr-2 pl-2"></i>
                      </div>
              
              
                  </div>
                  <div class="proj-icon pt-2  pt-lg-5">
                    <h4 >Tasks <span><small>({{counter}})</small></span></h4>
                    <div class=" boxes d-flex flex-wrap justify-content-evenly">
              
                      {% for job in jobs %}
                      {% with index=forloop.counter %}
                        <div class="shadow box d-flex justify-content-center align-items-center"><h6><a class="text-dark" href="javascript:void(0)" onclick="load_content('{{job.reference}}')">{{job.abbr}}</a></h6></div>
                        {% endwith%}
                      {% endfor %}
              
              
                      <!-- <div class="shadow box d-flex justify-content-center align-items-center"><h6>PD</h6></div>
                      <div class="shadow box d-flex justify-content-center align-items-center"><h6>PD</h6></div>
                      <div class="shadow box d-flex justify-content-center align-items-center"><h6>PD</h6></div>
                      <div class="shadow box d-flex justify-content-center align-items-center"><h6>PD</h6></div>
                      <div class="shadow boxs d-flex justify-content-center align-items-center"><h6>8+</h6></div> -->
              
                    </div>
                  </div>
                  <!-- <div class="add-new proj-icon pt-2  pt-lg-5">
                      <h4 >News Board</h4>
              
                  </div> -->
                </div>
              
              
              </div>
              
              </div>
              <div class="col-md-6 tasks">
                  <div class="white-back d-flex flex-column align-items-start justify-content-start pt-5 loading">
                  
                  <div class="segment2 d-flex justify-content-center align-items-center" style="height: 100%;">
                    Click on any task by on the task panel to see its progress
                  </div>
                  <div class="d-flex justify-content-end align-items-end p-4" style="width: 100%; height: 100%;">
                  <button class="shadow add-button" data-toggle="modal" data-target="#exampleModalScrollable">+</button>
                  </div>
                  </div>
                  </div>
              </div>
              
            </div>
          </div>
      </div>
      </div>
      
    </div>
     <!-- Modal -->
<div class="modal fade bd-example-modal-xl" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalScrollableTitle">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="site-section bg-light">
                <div class="container-fluid">
                  <div class="container">
                    <div class="row">
                    <div class="col-lg-1"></div>
                    <div class=" col-lg-6">



                      <form action="#" class="p-5 bg-white">
                          {{ form.media }}
                        <!-- <div class="row form-group">
                          <div class="col-md-12 mb-3 mb-md-0">
                            <label for="option-price-1">
                              <input type="checkbox" id="option-price-1"> <span class="text-success">$300</span> For 30 days
                            </label>
                          </div>
                          <div class="col-md-12 mb-3 mb-md-0">
                            <label for="option-price-2">
                              <input type="checkbox" id="option-price-2"> <span class="text-success">$200</span> / Monthly Recurring
                            </label>
                          </div>
                        </div> -->

                        <div class="row form-group">
                          <div class="col-md-12 mb-3 mb-md-0">
                            <label class="font-weight-bold" for="title">Job Title</label>
                            <input type="text" id="title" class="titles form-control" placeholder="eg. Full Stack Frontend">
                          </div>
                        </div>

                        {% if user.is_authenticated %}
                        <div class="row form-group mb-5">
                          <div class="col-md-12 mb-3 mb-md-0">
                            <label class="font-weight-bold" for="fullname">Name</label>
                            <input type="text" id="fullname" class="form-control" value="{{user.first_name}}">
                          </div>
                        </div>

                        {% else %}
                        <div class="row form-group mb-5">
                          <div class="col-md-12 mb-3 mb-md-0">
                            <label class="font-weight-bold" for="fullname">Name</label>
                            <input type="text" id="fullname" class="form-control" placeholder="eg. Facebook, Inc.">
                          </div>
                        </div>
                        {% endif %}




                        <div class="row form-group">

                          <div class="col-md-4">
                              <div class="col-md-12"><h3>Category</h3></div>
                          {% for cat in category %}
                          <div class="mb-3 mb-md-0">
                            <label for="option-job-type-1">
                              <!-- <input type="radio" value="{{cat.id}}" class="jo_cate" name="cate"> {{cat.category}} -->
                              <li class="joo"  value="{{cat.id}}">{{cat.category}} <i class="fa fa-arrow-right" style="float: right;"  aria-hidden="true"></i> </li>
                            </label>
                          </div>
                          {% endfor %}
                        </div>
                        <div class="col-md-4 new-form">

                        </div>
                        <div class="col-md-4 ded-form">

                          </div>
                        </div>

                        <div class="row form-group">
                          <div class="col-md-12"><h3>Job Description</h3></div>
                          <div class="col-md-12 mb-3 mb-md-0">
                            <!-- <textarea name="" class="form-control" id="" cols="30" rows="5"></textarea> -->
                              <textarea class="form-control" name="editor1" id="" rows="3"></textarea>
                              <script>
                                    CKEDITOR.replace( 'editor1' );

                            </script>
                          </div>
                        </div>

                        <!-- <div class="row form-group">
                          <div class="col-md-12">
                            <input type="submit" value="Post" class="btn btn-primary  py-2 px-5">
                          </div>
                        </div> -->


                      </form>
                    </div>
                    <!-- <div class="col-lg-1"></div> -->
                    <div class="col-lg-4">

                      {% if user.is_authenticated %}
                      <div class="p-4 mb-3 bg-white">
                          <h3 class="h5 text-black mb-3">Contact Info</h3>
                          <!-- <p class="mb-0 font-weight-bold">Address</p>
                          <p class="mb-4">{{user.address}}</p> -->

                          <p class="mb-0 font-weight-bold">Phone</p>
                          <p class="mb-4"><a class="text-green" href="#">{{user.phone}}</a></p>
                          <input type="hidden" value="{{user.phone}}" id="phone">
                          <p class="mb-0 font-weight-bold">Email Address</p>
                          <p class="mb-0"><a class="text-green" href="#">{{user.email}}</a></p>

                        </div>
                      {% else %}
                         <div class="p-4 mb-3 bg-white">
                        <!-- <h3 class="h5 text-black mb-3">Contact Info</h3>
                        <p class="mb-0 font-weight-bold">Address</p>
                        <p class="mb-4">{{user.adde}}</p> -->

                        <!-- <p class="mb-0 font-weight-bold">Phone</p> -->
                        <div class="col-md-12 mb-3 mb-md-0">
                          <label class="font-weight-bold" for="phone">Phone</label>
                          <input type="text" id="phone" class="form-control" required>
                          <small id="phone_helpId" class="d-none form-text text-muted">Help text</small>
                        </div>
                        <!-- <p class="mb-4"><a href="#">+1 232 3235 324</a></p> -->

                        <div class="col-md-12 mb-3 mb-md-0">
                          <label class="font-weight-bold" for="phone">Email Address</label>
                          <input type="email" id="email_hid" class="form-control email_hid" required>
                          <small id="email_helpId" class="d-none form-text text-muted">Help text</small>
                        </div>

                      </div>
                      {% endif %}


                      <div class="p-4 mb-3 bg-white ">
                        <div class="">
                          <h3 class="center h5 text-black mb-3">Booking Summary</h3>
                        </div>
                        <div class="ko">

                        </div>
                        <div id="load_cat">
                          <p>Category  <span class="cate_sum" style="float:right;">{{cate}}</span></p>
                        </div>
                        <div id="load_sub"style="display: none">

                            <p id="load_sub1">Sub Category <span style="float: right;" class="sub_cat_sum mr-auto"><span id="sub_span">{{subc}}</span> <small>{{sub_price}}</small></span> </p>
                        </div>
                        <div id="load_deadline"style="display: none">
                            <p id="load_sub2">Deadline<span style="float: right;" class="dead_sum mr-auto ">{{deadlines}} <small>{{dead_price}}</small></span> </p>
                        </div>
                        <div class="total">
                            <input type="hidden" value="{{user.email}}" id="email_hid">
                            <input type="hidden" name="user_id" id="user_id" value="{{user.id}}">
                            <p class="totals" style="display: none"><b>Total</b> <span style="float: right;" class="mr-auto">&#8358;<span id="total_sum">{{tota}}</span></p>
                        </div>
                        <form class="d-flex justify-content-center">
                          <script src="https://js.paystack.co/v1/inline.js"></script>

                          {% if user.is_authenticated %}
                            <button class="text-center text-white btn btn-success" type="button" onclick="payWithPaystack(true)"> Pay </button>
                            {% else %}
                            <button class="text-center text-white btn btn-success" type="button" onclick="payWithPaystack(false)"> Pay </button>
                          {% endif %}


                        </form>
                        <!-- <p><a href="#" class="btn btn-green text-white  py-2 px-4">Checkout</a></p> -->

                      </div>
                    </div>
                  </div>
                  </div>

                </div>
              </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="{% static 'js/jquery-3.3.1.min.js' %} "></script>
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>


  <script>
  function load_content(reference){
    $.ajax({
      url: "/user_track",
      method:"GET",
      data:{
        "reference":reference
      },
      success:function(data){
        $(".loading").html(data)
      }


    })
  }
  function settings(user){
    // console.log(user);
    
     $.ajax({
      url: "/account/settings/"+user,
      method:"GET",
      data:{
        "user":user
      },
      success:function(data){        
        $("#main-areas").html(data)
      }


    })
  }
  </script>
</html>